(this.webpackJsonppraredn=this.webpackJsonppraredn||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"resource":"/cgi-bin/sysinfo.json","params":{"hosts":"?hosts=1","services":"&services=1","link_info":"link_info=1"}}')},37:function(e,t,n){e.exports=n(69)},42:function(e,t,n){},46:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),o=n.n(l),c=(n(42),n(10)),i=n.n(c),s=n(36),u=n(22),p=n(11),d=n(12),m=n(15),f=n(14),h=(n(44),n(45),n(46),n(76)),E=n(77),g=n(72),v=n(78),y=n(4),w=new y.Icon({iconUrl:"./purpleRadioCircle-icon.png",iconSize:[25,25]}),b=new y.Icon({iconUrl:"./goldRadioCircle-icon.png",iconSize:[25,25]}),k=new y.Icon({iconUrl:"./blueRadioCircle-icon.png",iconSize:[25,25]}),C=new y.Icon({iconUrl:"./magentaRadioCircle-icon.png",iconSize:[25,25]}),D=new y.Icon({iconUrl:"./grayRadioCircle-icon.png",iconSize:[25,25]});function O(e){if(null!==e&&"undefined"!==typeof e){if(e.includes("2."))return w;if(e.includes("5."))return b;if(e.includes("3."))return k;if(e.includes("900"))return C}return D}var j=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={zoom:9.5,mapCenter:{lat:18.2,lon:-66.3}},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;if(0===this.props.appConfig.length)return null;var t=[this.props.appConfig.mapSettings.mapCenter.lat,this.props.appConfig.mapSettings.mapCenter.lon];return r.a.createElement(h.a,{ref:"map",className:"Map",center:t,zoom:this.props.appConfig.mapSettings.zoom,scrollWheelZoom:!1},r.a.createElement(E.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.nodesData.map((function(t){return r.a.createElement(g.a,{ref:t.node,key:t.node,position:[t.lat,t.lon],icon:O(t.meshrf.freq)},r.a.createElement(v.a,null," ",r.a.createElement("div",null,r.a.createElement("h6",null,r.a.createElement("a",{href:"http://".concat(t.node,".local.mesh"),target:"_blank"},t.node)),r.a.createElement("table",null,r.a.createElement("tr",{style:{verticalAlign:"top"}},r.a.createElement("td",null,"Desc"),r.a.createElement("td",null,t.node_details.description)),r.a.createElement("tr",null,r.a.createElement("td",null,"Position"),r.a.createElement("td",null,t.lat,",",t.lon)),r.a.createElement("tr",null,r.a.createElement("td",null,"RF Status"),r.a.createElement("td",null,t.meshrf.status)),r.a.createElement("tr",null,r.a.createElement("td",null,"SSID"),r.a.createElement("td",null,t.meshrf.ssid)),r.a.createElement("tr",null,r.a.createElement("td",null,"RF Channel"),r.a.createElement("td",null,t.meshrf.channel)),r.a.createElement("tr",null,r.a.createElement("td",null,"RF Freq"),r.a.createElement("td",null,t.meshrf.freq)),r.a.createElement("tr",null,r.a.createElement("td",null,"MAC"),r.a.createElement("td",null,t.interfaces[0].mac)),r.a.createElement("tr",{style:{verticalAlign:"top"}},r.a.createElement("td",null,"Model"),r.a.createElement("td",null,t.node_details.model)),r.a.createElement("tr",null,r.a.createElement("td",{width:"80"},"Firmware"),r.a.createElement("td",null,t.node_details.firmware_version)),r.a.createElement("tr",{style:{verticalAlign:"top",whiteSpace:"nowrap"}},r.a.createElement("td",null,"Neighbors"),r.a.createElement("td",null," ",t.link_info.map((function(t){return r.a.createElement("div",{key:t.hostname},r.a.createElement("a",{href:"#",onClick:function(){return e.openPopup(t.hostname.replace(/\.local\.mesh$/,""))}},t.hostname.replace(/\.local\.mesh$/,""))," ",t.linkType?"(".concat(t.linkType,")"):""," ")}))," "))))))})))}},{key:"openPopup",value:function(e){var t=this.refs[e];t&&t.fireLeafletEvent("click")}}]),n}(a.Component),S=n(16),R=n(23),N=n.n(R),x=n(24),M=n.n(x),_=(n(67),n(68),n(73)),z=n(74),A=n(75),F=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(n,[{key:"countNodes",value:function(e,t){switch(t){case 900:return e.filter((function(e){return"on"===e.meshrf.status&&e.meshrf.freq.includes("900")})).length;case 24:return e.filter((function(e){return"on"===e.meshrf.status&&e.meshrf.freq.includes("2.")})).length;case 34:return e.filter((function(e){return"on"===e.meshrf.status&&e.meshrf.freq.includes("3.")})).length;case 58:return e.filter((function(e){return"on"===e.meshrf.status&&e.meshrf.freq.includes("5.")})).length;case 0:default:return e.filter((function(e){return"off"===e.meshrf.status})).length}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(z.a,{xs:!0,lg:"2"},r.a.createElement(A.a,{src:this.props.appConfig.logoPath,width:225,fluid:!0})),r.a.createElement(z.a,{xs:!0,lg:"8"}),r.a.createElement(z.a,null,r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Band"),r.a.createElement("th",null,"Nodes")),r.a.createElement("tr",null,r.a.createElement("td",null,"  ",r.a.createElement(A.a,{src:"./magentaRadioCircle-icon.png",width:20})," 900 Mhz "),r.a.createElement("td",null,"# ",this.countNodes(this.props.nodesData,900)," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(A.a,{src:"./purpleRadioCircle-icon.png",width:20})," 2.4 Ghz "),r.a.createElement("td",null," # ",this.countNodes(this.props.nodesData,24))),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(A.a,{src:"./blueRadioCircle-icon.png",width:20})," 3.4 Ghz "),r.a.createElement("td",null," # ",this.countNodes(this.props.nodesData,34))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(A.a,{src:"./goldRadioCircle-icon.png",width:20})," 5Ghz "),r.a.createElement("td",null,"# ",this.countNodes(this.props.nodesData,58))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(A.a,{src:"./grayRadioCircle-icon.png",width:20})," Mesh RF Off "),r.a.createElement("td",null,"# ",this.countNodes(this.props.nodesData,0)))))),r.a.createElement("br",null))}}]),n}(a.Component),I=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={appConfig:[],nodesData:[]},e}return Object(d.a)(n,[{key:"retrieveNodeDetails",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://".concat(t.ip).concat(S.resource,"/?").concat(S.params.link_info));case 3:200===(n=e.sent).status&&""!==n.lat&&(a={node:n.data.node,lat:n.data.lat,lon:n.data.lon,meshrf:n.data.meshrf,node_details:n.data.node_details,interfaces:n.data.interfaces,link_info:Object.keys(n.data.link_info).map((function(e){return n.data.link_info[e]}))},this.setState({nodesData:[].concat(Object(s.a)(this.state.nodesData),[a])})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("There was an error getting ".concat(t.name," details"));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getNodesData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localnode.local.mesh".concat(S.resource).concat(S.params.hosts));case 3:200!==(t=e.sent).status?M.a.alert("Unable to find your AREDN node, please verify if you are connected to the MESH."):(n=new RegExp(this.state.appConfig.nodesFilter),console.log(n,"REGEX"),a=t.data.hosts.filter((function(e){return e.name.toUpperCase().trim().match(n)})),console.log("Filtered Node List",a),Object.keys(a).forEach((function(e){r.retrieveNodeDetails(a[e])}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.a.alert("Unable to find your AREDN node, please verify if you are connected to the MESH.");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("appConfig.json");case 2:t=e.sent,this.setState({appConfig:t.data}),document.title="".concat(this.state.appConfig.contactInfo.callsign," - ").concat("MeshMap"," ").concat("1.0.1"," by ").concat("KP4MSR"),this.getNodesData();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(F,{nodesData:this.state.nodesData,appConfig:this.state.appConfig}),r.a.createElement(j,{nodesData:this.state.nodesData,appConfig:this.state.appConfig}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.f9a3acac.chunk.js.map